jQuery(document).ready(function(e){csTimeZone.registerEvents(),csTimeZone.createDropDown("#timeZones")});var csTimeZone={defaultTz:function(){return localStorage.getItem("csUserTimeZone")||null},createDropDown:function(e){var a=csTimeZone.defaultTz(),t='<select id="csTzSelect" class="show-tick" data-container="#schedule" data-width="fit"\n                                data-live-search="true" data-live-search-placeholder="search timezone"\n                                data-style="btn-outline-info">\n                            <option value="">select timezone\n                        </option>';moment.tz.names().forEach(function(e){t+=`<option value="${e}" ${a===e?"selected":""}>${e}</option>`}),t+="</select>",$(e).append(t),$("#csTzSelect").selectpicker()},registerEvents:function(e){$("body").on("changed.bs.select","#csTzSelect",function(e){$(this).val()&&(localStorage.setItem("csUserTimeZone",$(this).val()),csTimeZone.convertAllScheduleRows($(this).val()))})},convertAllScheduleRows:function(e){$(".schedule-item").each(function(a,t){var n=$(t).attr("data-ist-date"),i=csTimeZone.convertIstToSelected(n,e),o=$(t).find(".userTzTime");csTimeZone.updateDom(i,o)})},updateDom:function(e,a){if(e.day){var t=e.day+", "+e.time;a.removeClass("text-secondary").addClass("text-warning").text(t)}else a.removeClass("text-warning").addClass("text-secondary").text(e.time);return a},addDatesToDays:function(e){let a=["sun","mon","tue","wed","thu","fri","sat"];for(let t of e)if(!t.date){let e=a.indexOf(t.name);if(e>=0){let a=moment().day(e);t.date=a.format("YYYY-MM-DD")}else t.date="missing"}return e},formatScheduleDateTime:function(e,a){var t=e+" "+a+" +05:30";return moment.parseZone(t,"YYYY-MM-DD hh:mm A ZZ").format()},convertIstToSelected:function(e,a){var t=moment.parseZone(e),n=t.clone().tz(a),i={time:n.format("hh:mm A z")};return t.format("dddd")!=n.format("dddd")&&(i.day=n.format("dddd")),i}};jQuery(document).ready(function(e){csService.init()});var csService={url:"http://catholicstreamlive-env.eba-mh2niqse.ap-south-1.elasticbeanstalk.com",init:function(e){csService.getLanguanges(),$("body").on("click","#instructions",csService.showGuidelineModal),$("body").on("shown.bs.tab",'.daySelection a[data-toggle="tab"]',function(e){var a=$(e.target),t=a.attr("href");if($(t).children(".schedule-item").length<1){var n=a.attr("data-day-id"),i=a.attr("data-day-date"),o=a.parents(".tab-pane").attr("data-mass-lang");csService.getSchedule(o,n,t,i,!0)}csService.scrollToHolyMass()})},scrollToHolyMass:function(){$("html, body").animate({scrollTop:$("#holyMass").offset().top-$("#header").outerHeight()},1e3,"easeInOutExpo")},showUnderMaintanence:function(){$("#schedule, #footer").hide(),$("#maintenanceModal").modal("show")},showGuidelineModal:function(){$("#guidelinesModal").modal("show")},capitalizeString:function(e){return e.replace(/\b\w/g,function(e){return e.toUpperCase()})},getLanguanges:function(){$.get(csService.url+"/getLanguages",function(e){csService.showGuidelineModal(),csService.displayLanguages(e)}).fail(function(){console.log("failed to get languages!"),csService.showUnderMaintanence()})},getDays:function(){$.get(csService.url+"/getDays",function(e){days=csTimeZone.addDatesToDays(e),csService.displayDays(days)}).fail(function(){console.log("failed to get days!")})},getSchedule:function(e,a,t,n,i){$.get(csService.url+`/getSchedule/${e}/${a}`,function(e){csService.displaySchedule(e,t,n,i)}).fail(function(){console.log("failed to get schedule!")})},displayLanguages:function(e){var a=!0;$("#langSelection").siblings(".loadingContent").fadeOut(500,function(){$(this).remove(),$.each(e,function(e,t){var n=csService.capitalizeString(t),i=a?"show active":"";$("#langSelection").append(`<li class="nav-item lej-padding">\n                        <a class="nav-link ${i}" href="#${n}Mass" role="tab" data-toggle="tab"\n                            aria-selected="${a}">${n}</a>\n                     </li>`),$("#holyMass").append(`<div id="${n}Mass" data-mass-lang="${t}" role="tabpanel" class="tab-pane fade ${i}">\n                        <h3 class="text-center text-capitalize font-weight-bold text-danger">${n} Holy Mass</h3>\n                        \n                        <ul class="daySelection nav nav-tabs nav-fill" role="tablist">\n                            <li class="nav-item lej-padding icon">\n                                <a class="nav-link" data-toggle="tooltip" data-placement="top" title="select day to view timing"><i class="far fa-calendar-alt"></i></a>\n                            </li>\n                        </ul>\n                        <div class="tab-content row justify-content-center m-3">\n                            <div class="d-flex justify-content-center loadingContent">\n                                <div class="spinner-grow text-warning" role="status">\n                                    <span class="sr-only">Loading...</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>`),a=!1}),$('[data-toggle="tooltip"]').tooltip(),csService.getDays()})},displayDays:function(e){$.each($("ul.daySelection"),function(a,t){var n=$(t).parents(".tab-pane").attr("data-mass-lang"),i=$(t).siblings("div.tab-content");$(i).children(".loadingContent").fadeOut(500,function(){$(this).remove();var a=!0;$.each(e,function(e,o){var s=["mon","tue","wed","thu","fri","sat"].includes(o.name)?"":"wide",l=a?"show active":"",c=(o.name+csService.capitalizeString(n)+"Mass").replace(" ","-");if($(t).append(`<li class="nav-item lej-padding ${s}">\n                            <a class="nav-link ${l}" href="#${c}" \n                                data-day-id="${o.name}" data-day-date="${o.date}" role="tab" data-toggle="tab">\n                                ${csService.capitalizeString(o.displayName)}\n                            </a>\n                        </li>`),$(i).append(`<div  role="tabpanel" class="col-lg-9  tab-pane fade ${l}" id="${c}">\n                            <div class="d-flex justify-content-center m-3 loadingContent">\n                                <div class="spinner-grow text-warning" role="status">\n                                    <span class="sr-only">Loading...</span>\n                                </div>\n                            </div>\n                        </div>`),a){var d=$(t).is(":visible");csService.getSchedule(n,o.name,`#${c}`,o.date,d)}a=!1})})})},displaySchedule:function(e,a,t,n){$(a).children(".loadingContent").fadeOut(500,function(){$(this).remove(),$.each(e,function(e,i){var o=n?"wow fadeInUp":"",s=i.description?`<p>${i.description}</p>`:"",l=csTimeZone.formatScheduleDateTime(t,i.prettyTime);if($target=$('<time class="userTzTime d-block"></time>'),csTimeZone.defaultTz()){var c=csTimeZone.convertIstToSelected(l,csTimeZone.defaultTz());$target=csTimeZone.updateDom(c,$target)}$(a).append(`<div class="row schedule-item ${o}" data-ist-date="${l}">\n                        <div class="col-md-3 py-1 text-danger">\n                            <time>${i.prettyTime} IST</time>\n                            ${$target[0].outerHTML}\n                        </div>\n                        <div class="col-md-7 py-1">\n                            <h4>${i.name}</h4>\n                            ${s}\n                        </div>\n                        <div class="col-md-2 py-1">\n                            <a href="${i.link}" target="_blank"><button class="btn btn-sm btn-warning"><i\n                                class="fa fa-television pr-1"></i>Watch</button> </a>\n                        </div>\n                    </div>`)})})}};function dayOfWeekAsString(e){return["sun","mon","tue","wed","thu","fri","sat"][e]}jQuery(document).ready(function(e){if(e('[data-toggle="tooltip"]').tooltip(),e(window).scroll(function(){e(this).scrollTop()>100?e(".back-to-top").fadeIn("slow"):e(".back-to-top").fadeOut("slow")}),e(".back-to-top").click(function(){return e("html, body").animate({scrollTop:0},1500,"easeInOutExpo"),!1}),e(window).scroll(function(){e(this).scrollTop()>100?e("#header").addClass("header-scrolled"):e("#header").removeClass("header-scrolled")}),e(window).scrollTop()>100&&e("#header").addClass("header-scrolled"),window.matchMedia("(max-width: 767px)").matches&&e("#intro").css({height:e(window).height()}),(new WOW).init(),e("#nav-menu-container").length){var a=e("#nav-menu-container").clone().prop({id:"mobile-nav"});a.find("> ul").attr({class:"",id:""}),e("body").append(a),e("body").prepend('<button type="button" id="mobile-nav-toggle"><i class="fa fa-bars"></i></button>'),e("body").append('<div id="mobile-body-overly"></div>'),e("#mobile-nav").find(".menu-has-children").prepend('<i class="fa fa-chevron-down"></i>'),e(document).on("click",".menu-has-children i",function(a){e(this).next().toggleClass("menu-item-active"),e(this).nextAll("ul").eq(0).slideToggle(),e(this).toggleClass("fa-chevron-up fa-chevron-down")}),e(document).on("click","#mobile-nav-toggle",function(a){e("body").toggleClass("mobile-nav-active"),e("#mobile-nav-toggle i").toggleClass("fa-times fa-bars"),e("#mobile-body-overly").toggle()}),e(document).click(function(a){var t=e("#mobile-nav, #mobile-nav-toggle");t.is(a.target)||0!==t.has(a.target).length||e("body").hasClass("mobile-nav-active")&&(e("body").removeClass("mobile-nav-active"),e("#mobile-nav-toggle i").toggleClass("fa-times fa-bars"),e("#mobile-body-overly").fadeOut())})}else e("#mobile-nav, #mobile-nav-toggle").length&&e("#mobile-nav, #mobile-nav-toggle").hide();e(".nav-menu a, #mobile-nav a, .scrollto").on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=e(this.hash);if(a.length){var t=0;return e("#header").length&&(t=e("#header").outerHeight(),e("#header").hasClass("header-fixed")||(t-=20)),e("html, body").animate({scrollTop:a.offset().top-t},1500,"easeInOutExpo"),e(this).parents(".nav-menu").length&&(e(".nav-menu .menu-active").removeClass("menu-active"),e(this).closest("li").addClass("menu-active")),e("body").hasClass("mobile-nav-active")&&(e("body").removeClass("mobile-nav-active"),e("#mobile-nav-toggle i").toggleClass("fa-times fa-bars"),e("#mobile-body-overly").fadeOut()),!1}}}),e("#buy-ticket-modal").on("show.bs.modal",function(a){var t=e(a.relatedTarget).data("ticket-type");e(this).find("#ticket-type").val(t)})});var day=dayOfWeekAsString((new Date).getDay());$("#"+day).addClass("active"),$("#"+day).addClass("show"),$("#"+day+"-link").addClass("active"),$("#"+day+"-link").addClass("show"),$("#"+day+"-link").attr("aria-selected","true");